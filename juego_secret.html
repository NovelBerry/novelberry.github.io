<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Juego Grupal - El Narrador Oculto</title>
    <style>
        body {
            background-color: #1a1a2e; /* Azul oscuro/Púrpura */
            color: #e0e0e0; /* Gris claro */
            font-family: 'Georgia', serif;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            text-align: center;
        }

        .story-container {
            padding: 40px;
            border: 3px solid #ff69b4; /* Rosa brillante */
            box-shadow: 0 0 25px rgba(255, 105, 180, 0.7);
            border-radius: 15px;
            background-color: rgba(0, 0, 0, 0.6);
            max-width: 800px;
            min-height: 400px;
        }

        h1 {
            color: #64ffda; /* Cian para el título */
            font-size: 2.8em;
            margin-bottom: 20px;
            text-shadow: 0 0 8px #64ffda;
        }
        
        #story-text {
            font-size: 1.3em;
            line-height: 1.6;
            margin-bottom: 30px;
            min-height: 100px;
        }

        #choice-buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .choice-button {
            padding: 12px 25px;
            font-size: 1.1em;
            background-color: #4a4a5e;
            color: #e0e0e0;
            border: 1px solid #ff69b4;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s, box-shadow 0.3s;
            text-align: left;
        }

        .choice-button:hover {
            background-color: #ff69b4;
            color: black;
            box-shadow: 0 0 10px #ff69b4;
        }
        
        .choice-button:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }

        /* Estilo para la escena final */
        .ending {
            color: #64ffda;
            font-weight: bold;
            font-size: 1.5em;
            margin-top: 30px;
        }

        /* Enlace para volver */
        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            color: #e0e0e0;
            text-decoration: none;
            font-size: 1.1em;
            border: 1px solid #ff69b4;
            padding: 8px 15px;
            border-radius: 5px;
            transition: background-color 0.2s;
        }
        .back-link:hover {
            background-color: rgba(255, 105, 180, 0.2);
        }
    </style>
</head>
<body>
    <a href="main.html" class="back-link">← Volver al Perfil</a>

    <div class="story-container">
        <h1>[EL NARRADOR OCULTO]</h1>
        <div id="story-text"></div>
        <div id="choice-buttons"></div>
    </div>

    <script>
        let currentScene = 'intro';

        // Definición de las escenas de la historia (Estructura de Árbol)
        const STORY_TREE = {
            'intro': {
                text: "Estás con tu grupo de amigos, explorando un antiguo y misterioso gimnasio, cuando un portal se abre en la cancha de baloncesto. Una criatura con forma de oso de peluche gigante y una pistola láser sale y los mira con curiosidad.",
                choices: [
                    { text: "A: Gritar '¡NO SOMOS TUS ENEMIGOS!' y lanzar un balón de baloncesto.", next: 'scene1_A' },
                    { text: "B: Retroceder lentamente y buscar la salida de emergencia.", next: 'scene1_B' },
                    { text: "C: Sacar tu móvil y preguntarle al oso si tiene Discord.", next: 'scene1_C' }
                ]
            },
            
            'scene1_A': {
                text: "El oso de peluche detiene el balón con una garra peluda. ¡Pero la pistola láser se cae al suelo! Su intención no parecía ser mala, pero ahora está desarmado y llorando porque perdió su juguete.",
                choices: [
                    { text: "1: Devolverle la pistola y prometer que no le dirán a nadie.", next: 'scene2_1' },
                    { text: "2: Preguntarle de dónde viene y por qué tiene una pistola láser.", next: 'scene2_2' }
                ]
            },
            'scene1_B': {
                text: "Mientras retroceden, el portal se cierra rápidamente. El oso gruñe, sintiéndose abandonado. ¡Dispara la pistola al techo! Se abre un agujero y comienza a llover pintura de neón.",
                choices: [
                    { text: "1: Correr hacia el portal antes de que se abra otro.", next: 'scene2_3' },
                    { text: "2: Tomar un balde de la pintura de neón para analizarla.", next: 'scene2_4' }
                ]
            },
            'scene1_C': {
                text: "El oso te mira con interés. Asiente y saca su propio móvil, mostrando un código QR. '¡Espera, esto es mi servidor de memes!' grita con una voz sorprendentemente aguda.",
                choices: [
                    { text: "1: Unirse al servidor y negociar la paz a cambio de memes de alta calidad.", next: 'scene2_5' },
                    { text: "2: Robarle la pistola láser mientras está distraído con el móvil.", next: 'scene2_6' }
                ]
            },
            
            // --- Escena 2 (Caminos Finales) ---
            'scene2_1': { text: "El oso, feliz, les da un puñado de caramelos de la otra dimensión y salta al portal de regreso. ¡Su aventura termina con un final dulce y amistoso!", choices: [] },
            'scene2_2': { text: "El oso responde: 'Vengo de la Dimensión del Desorden... ¡y esta pistola estaba en oferta!' Se da cuenta de que el gimnasio no es un lugar de combate y se disculpa. ¡La paz se sella con un apretón de manos! ¡FIN!", choices: [] },
            'scene2_3': { text: "El grupo se lanza hacia el portal, pero aterrizan en una piscina de gelatina. ¡El oso se ríe desde el otro lado! La misión fue un fracaso húmedo. ¡FIN!", choices: [] },
            'scene2_4': { text: "Mientras analizan la pintura, el oso les muestra que es pintura mágica que permite dibujar portales. ¡El oso los invita a crear su propia aventura! ¡El juego continúa en tu imaginación! ¡FIN!", choices: [] },
            'scene2_5': { text: "¡El oso se convierte en el nuevo administrador de tu servidor de Discord! La comunidad explota en memes y se crea una alianza interdimensional. ¡El mejor final posible! ¡FIN!", choices: [] },
            'scene2_6': { text: "El oso se enfurece. ¡Les lanza una descarga eléctrica por el móvil! Ahora todos tienen el pelo de punta y una nueva misión: ¡recuperar el honor! Pero por ahora, están atrapados y chamuscados. ¡FIN!", choices: [] },

            // Final del juego
            'end': { text: "--- HISTORIA CONCLUIDA. PULSA RECARGAR PARA UNA NUEVA AVENTURA ---", choices: [] }
        };

        function renderScene(sceneId) {
            const scene = STORY_TREE[sceneId];
            if (!scene) {
                renderScene('end');
                return;
            }

            document.getElementById('story-text').innerHTML = scene.text;
            const buttonsContainer = document.getElementById('choice-buttons');
            buttonsContainer.innerHTML = '';
            
            // Si no hay opciones, es el final. Muestra el mensaje de finalización.
            if (scene.choices.length === 0) {
                document.getElementById('story-text').classList.add('ending');
                document.getElementById('story-text').style.textAlign = 'center';
                return;
            }

            // Renderiza los botones de opción
            scene.choices.forEach(choice => {
                const button = document.createElement('button');
                button.className = 'choice-button';
                button.textContent = choice.text;
                button.onclick = () => {
                    disableButtons();
                    // Avanza la historia al siguiente nodo
                    renderScene(choice.next);
                };
                buttonsContainer.appendChild(button);
            });
        }
        
        function disableButtons() {
            document.querySelectorAll('.choice-button').forEach(btn => btn.disabled = true);
        }

        // Iniciar el juego
        window.onload = () => renderScene('intro');
    </script>
</body>
</html>
