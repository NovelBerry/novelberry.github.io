<!DOCTYPE html>
<html lang="es">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>Atrapa el dinero! - 15 Escenarios</title>
Â  Â  <style>
Â  Â  Â  Â  /* --- ESTILOS CSS --- */

Â  Â  Â  Â  :root {
Â  Â  Â  Â  Â  Â  --player-color: #FFD700; /* Dorado */
Â  Â  Â  Â  Â  Â  --bad-item-color: #B22222; /* Rojo Ladrillo */
Â  Â  Â  Â  Â  Â  --text-color: #000000;
Â  Â  Â  Â  }

Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  font-family: 'Arial', sans-serif;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  min-height: 100vh;
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  /* El fondo inicial se establece en initGame() */
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  Â  Â  transition: background 1s ease-in-out;
Â  Â  Â  Â  }

Â  Â  Â  Â  #game-container {
Â  Â  Â  Â  Â  Â  width: 90vw;
Â  Â  Â  Â  Â  Â  max-width: 800px;
Â  Â  Â  Â  Â  Â  height: 80vh;
Â  Â  Â  Â  Â  Â  max-height: 600px;
Â  Â  Â  Â  Â  Â  border: 10px solid #5D4037; /* Borde inicial */
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 30px rgba(0, 0, 0, 0.5);
Â  Â  Â  Â  Â  Â  background: inherit; 
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  Â  Â  cursor: crosshair;
Â  Â  Â  Â  }

Â  Â  Â  Â  #title-area {
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  padding: 10px;
Â  Â  Â  Â  Â  Â  background-color: rgba(255, 255, 255, 0.8);
Â  Â  Â  Â  Â  Â  border-bottom: 5px solid #3e2723;
Â  Â  Â  Â  }

Â  Â  Â  Â  h1 {
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  color: #1A237E; 
Â  Â  Â  Â  Â  Â  font-size: 2.5em;
Â  Â  Â  Â  Â  Â  text-shadow: 2px 2px 4px #ccc;
Â  Â  Â  Â  }

Â  Â  Â  Â  #subtitle {
Â  Â  Â  Â  Â  Â  margin-top: 5px;
Â  Â  Â  Â  Â  Â  font-size: 1em;
Â  Â  Â  Â  Â  Â  color: #455A64;
Â  Â  Â  Â  }

Â  Â  Â  Â  #game-info {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: space-between;
Â  Â  Â  Â  Â  Â  padding: 10px 20px;
Â  Â  Â  Â  Â  Â  background-color: rgba(0, 0, 0, 0.7);
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  font-weight: bold;
             /* Asegura que la info de score se vea */
             z-index: 100;
Â  Â  Â  Â  }

Â  Â  Â  Â  #player {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  /* CORRECCIÃ“N: Posiciona al jugador sobre el Ã¡rea de "tierra" */
Â  Â  Â  Â  Â  Â  bottom: 10%; 
Â  Â  Â  Â  Â  Â  width: 100px;
Â  Â  Â  Â  Â  Â  height: 30px;
Â  Â  Â  Â  Â  Â  background-color: var(--player-color);
Â  Â  Â  Â  Â  Â  border: 3px solid #DAA520;
Â  Â  Â  Â  Â  Â  border-radius: 5px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 5px 10px rgba(0, 0, 0, 0.4);
Â  Â  Â  Â  Â  Â  left: calc(50% - 50px);
Â  Â  Â  Â  Â  Â  /* CORRECCIÃ“N: Z-index alto para que el jugador se vea siempre */
Â  Â  Â  Â  Â  Â  z-index: 99; 
Â  Â  Â  Â  }

Â  Â  Â  Â  .falling-item {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  top: 0;
Â  Â  Â  Â  Â  Â  font-size: 20px;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  border-radius: 3px;
Â  Â  Â  Â  Â  Â  box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  color: var(--text-color);
Â  Â  Â  Â  Â  Â  text-shadow: 1px 1px 1px #fff;
Â  Â  Â  Â  Â  Â  transition: opacity 0.1s;
             /* CORRECCIÃ“N: Z-index alto para los billetes y bombas */
             z-index: 90;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Estilos de billetes */
Â  Â  Â  Â  .bill-1 { background-color: #c8e6c9; width: 40px; height: 20px; } 
Â  Â  Â  Â  .bill-5 { background-color: #a5d6a7; width: 40px; height: 20px; } 
Â  Â  Â  Â  .bill-10 { background-color: #81c784; width: 45px; height: 22px; } 
Â  Â  Â  Â  .bill-20 { background-color: #66bb6a; width: 45px; height: 22px; } 
Â  Â  Â  Â  .bill-50 { background-color: #4caf50; width: 50px; height: 24px; } 
Â  Â  Â  Â  .bill-100 { background-color: #2e7d32; color: white; width: 50px; height: 24px; } 

Â  Â  Â  Â  /* Estilos de bomba */
Â  Â  Â  Â  .bad-item {
Â  Â  Â  Â  Â  Â  background-color: var(--bad-item-color);
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  border: 1px solid #8B0000;
Â  Â  Â  Â  Â  Â  font-size: 24px;
Â  Â  Â  Â  Â  Â  width: 30px;
Â  Â  Â  Â  Â  Â  height: 30px;
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Nubes de fondo (decoraciÃ³n) */
Â  Â  Â  Â  .cloud {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  background: white;
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  Â  Â  z-index: 1;
Â  Â  Â  Â  Â  Â  transition: opacity 1s; 
Â  Â  Â  Â  }
Â  Â  Â  Â  .cloud.c1 { top: 5%; left: 10%; width: 80px; height: 30px; transform: scale(1.5); }
Â  Â  Â  Â  .cloud.c2 { top: 15%; right: 5%; width: 120px; height: 50px; }
Â  Â  Â  Â  .cloud.c3 { top: 30%; left: 30%; width: 60px; height: 25px; transform: scale(0.8); }

Â  Â  Â  Â  /* Mensajes de juego */
Â  Â  Â  Â  #game-message {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  top: 50%;
Â  Â  Â  Â  Â  Â  left: 50%;
Â  Â  Â  Â  Â  Â  transform: translate(-50%, -50%);
Â  Â  Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  Â  Â  background-color: rgba(255, 255, 255, 0.95);
Â  Â  Â  Â  Â  Â  border: 5px solid #1A237E;
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 20px rgba(0, 0, 0, 0.7);
Â  Â  Â  Â  Â  Â  z-index: 1000;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  display: none;
Â  Â  Â  Â  Â  Â  color: #1A237E;
Â  Â  Â  Â  }

Â  Â  Â  Â  #game-message button {
Â  Â  Â  Â  Â  Â  padding: 10px 20px;
Â  Â  Â  Â  Â  Â  font-size: 1.2em;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  background-color: #4CAF50;
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  Â  Â  border-radius: 5px;
Â  Â  Â  Â  Â  Â  margin-top: 15px;
Â  Â  Â  Â  }

Â  Â  </style>
</head>
<body>

Â  Â  <div id="game-container">
Â  Â  Â  Â  <div class="cloud c1"></div>
Â  Â  Â  Â  <div class="cloud c2"></div>
Â  Â  Â  Â  <div class="cloud c3"></div>

Â  Â  Â  Â  <div id="title-area">
Â  Â  Â  Â  Â  Â  <h1>ðŸ’° Atrapa el dinero! ðŸ’µ</h1>
Â  Â  Â  Â  Â  Â  <p id="subtitle">Escenario: <span id="scenario-name"></span></p>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div id="game-info">
Â  Â  Â  Â  Â  Â  <span>Nivel: <span id="level">1</span> / 15</span>
Â  Â  Â  Â  Â  Â  <span>Objetivo: $<span id="level-goal">100</span></span>
Â  Â  Â  Â  Â  Â  <span>PuntuaciÃ³n: $<span id="score">0</span></span>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div id="player"></div>

Â  Â  Â  Â  <div id="game-message">
Â  Â  Â  Â  Â  Â  <h2 id="message-text">Â¡Nivel Superado!</h2>
Â  Â  Â  Â  Â  Â  <p id="message-detail">Has alcanzado el objetivo.</p>
Â  Â  Â  Â  Â  Â  <button id="next-level-button" onclick="nextLevel()">Continuar</button>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <script>
Â  Â  Â  Â  const gameContainer = document.getElementById('game-container');
Â  Â  Â  Â  const player = document.getElementById('player');
Â  Â  Â  Â  const scoreDisplay = document.getElementById('score');
Â  Â  Â  Â  const levelDisplay = document.getElementById('level');
Â  Â  Â  Â  const goalDisplay = document.getElementById('level-goal');
Â  Â  Â  Â  const gameMessage = document.getElementById('game-message');
Â  Â  Â  Â  const messageText = document.getElementById('message-text');
Â  Â  Â  Â  const messageDetail = document.getElementById('message-detail');
Â  Â  Â  Â  const nextLevelButton = document.getElementById('next-level-button');
Â  Â  Â  Â  const body = document.body;
Â  Â  Â  Â  const scenarioNameDisplay = document.getElementById('scenario-name');
Â  Â  Â  Â  const clouds = document.querySelectorAll('.cloud'); 

Â  Â  Â  Â  // --- Variables del Juego ---
Â  Â  Â  Â  let score = 0;
Â  Â  Â  Â  let currentLevel = 1;
Â  Â  Â  Â  let gameInterval;
Â  Â  Â  Â  let itemDropInterval;
Â  Â  Â  Â  let itemFallSpeed = 3;Â 
Â  Â  Â  Â  let isPaused = true; 

Â  Â  Â  Â  // DefiniciÃ³n de Niveles (Objetivo: Cantidad de dinero acumulado requerida)
Â  Â  Â  Â  const levels = [
Â  Â  Â  Â  Â  Â  100, 250, 450, 700, 1000, 
Â  Â  Â  Â  Â  Â  1400, 1900, 2500, 3200, 4000,
Â  Â  Â  Â  Â  Â  5000, 6500, 8500, 11000, 15000 
Â  Â  Â  Â  ];
        
        // --- Escenarios TemÃ¡ticos (15 Niveles) ---
        // Estructura: [Nombre, Color Cielo/Espacio, Color Tierra/Suelo, Borde Contenedor, Muestra Nubes, Fondo Cielo (%) ]
        const scenarios = [
            ["Tierra (ClÃ¡sico)", "#87CEEB", "#6B8E23", "#5D4037", true, 70], // Nivel 1
            ["Marte", "#993300", "#FF6347", "#8B4513", false, 80], // Nivel 2: Mucho cielo, poco suelo
            ["Luna", "#000033", "#B0C4DE", "#A9A9A9", false, 90], // Nivel 3: Casi todo espacio
            ["JÃºpiter", "#FFC300", "#C70039", "#800000", false, 100], // Nivel 4: 100% Atmosfera
            ["Anillo de Saturno", "#ADD8E6", "#191970", "#D2B48C", false, 95], // Nivel 5
            ["Ciudad de Santiago (Chile)", "#00BFFF", "#3CB371", "#1E90FF", true, 65], // Nivel 6: Ciudad
            ["Madrid (EspaÃ±a)", "#FFDAB9", "#8B0000", "#DC143C", true, 60], // Nivel 7: Atardecer/Ciudad
            ["Tokio (JapÃ³n)", "#C0C0C0", "#2F4F4F", "#708090", false, 85], // Nivel 8: Noche de ciudad
            ["Nueva York (EE. UU.)", "#4682B4", "#778899", "#A9A9A9", false, 75], // Nivel 9: Ciudad nublada
            ["Machu Picchu (PerÃº)", "#87CEFA", "#483C32", "#CD853F", true, 55], // Nivel 10: Mucha montaÃ±a/suelo
            ["Siberia (Rusia)", "#F0FFFF", "#4682B4", "#708090", true, 68], // Nivel 11: Nieve/FrÃ­o
            ["Monte Fuji (JapÃ³n)", "#FFEBCD", "#008000", "#3CB371", true, 72], // Nivel 12: Paisaje natural
            ["Gran CaÃ±Ã³n (EE. UU.)", "#FF7F50", "#8B4513", "#A0522D", false, 77], // Nivel 13: Desierto
            ["Aurora Boreal", "#008080", "#4B0082", "#00CED1", false, 100], // Nivel 14: Solo cielo/luz
            ["Universo Profundo", "#000000", "#000000", "#FFFFFF", false, 100] // Nivel 15: Espacio negro
        ];


Â  Â  Â  Â  // Tipos de Ã­tems: [valor, texto, clase_css, es_malo]
Â  Â  Â  Â  const itemTypes = [
Â  Â  Â  Â  Â  Â  [1, "$1", "bill-1", false], [5, "$5", "bill-5", false],
Â  Â  Â  Â  Â  Â  [10, "$10", "bill-10", false], [20, "$20", "bill-20", false],
Â  Â  Â  Â  Â  Â  [50, "$50", "bill-50", false], [100, "$100", "bill-100", false],
Â  Â  Â  Â  Â  Â  [-25, "ðŸ’£", "bad-item", true] // Objeto malo: Bomba, quita $25
Â  Â  Â  Â  ];

Â  Â  Â  Â  // FunciÃ³n para cambiar el fondo y el borde del contenedor segÃºn el escenario
Â  Â  Â  Â  function setScenarioStyle(scenario) {
Â  Â  Â  Â  Â  Â  const [name, skyColor, groundColor, borderColor, showClouds, skyPercentage] = scenario;
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // Aplica el gradiente de fondo al body
Â  Â  Â  Â  Â  Â  body.style.background = `linear-gradient(to bottom, ${skyColor} 0%, ${skyColor} ${skyPercentage}%, ${groundColor} ${skyPercentage}%, ${groundColor} 100%)`;
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  // Aplica el borde al contenedor
Â  Â  Â  Â  Â  Â  gameContainer.style.borderColor = borderColor;

Â  Â  Â  Â  Â  Â  // Actualiza el nombre del escenario en la UI
Â  Â  Â  Â  Â  Â  scenarioNameDisplay.textContent = name;

            // Muestra u oculta las nubes
            clouds.forEach(cloud => {
                cloud.style.opacity = showClouds ? '0.7' : '0';
            });
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- Crea y suelta los Ã­tems ---
Â  Â  Â  Â  function createItem() {
Â  Â  Â  Â  Â  Â  const item = document.createElement('div');
Â  Â  Â  Â  Â  Â  item.classList.add('falling-item');

Â  Â  Â  Â  Â  Â  let itemData;
Â  Â  Â  Â  Â  Â  const randomNum = Math.random();
Â  Â  Â  Â  Â  Â  const bombProbability = (currentLevel * 4) / 100;Â 

Â  Â  Â  Â  Â  Â  if (randomNum < bombProbability) {
Â  Â  Â  Â  Â  Â  Â  Â  itemData = itemTypes[6]; // Bomba
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  // Los billetes mÃ¡s grandes son menos comunes
Â  Â  Â  Â  Â  Â  Â  Â  let moneyIndex = Math.floor(Math.random() * 6); // $1 a $100
Â  Â  Â  Â  Â  Â  Â  Â  // Aumenta la probabilidad de billetes grandes en niveles altos
Â  Â  Â  Â  Â  Â  Â  Â  if (currentLevel > 5 && Math.random() < (currentLevel / 15)) {
                    moneyIndex = Math.floor(Math.random() * 3) + 3; // $20, $50, $100 (Ã­ndices 3, 4, 5)
                }
Â  Â  Â  Â  Â  Â  Â  Â  itemData = itemTypes[moneyIndex];
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  const [value, text, className, isBad] = itemData;

Â  Â  Â  Â  Â  Â  item.textContent = text;
Â  Â  Â  Â  Â  Â  item.classList.add(className);
Â  Â  Â  Â  Â  Â  item.setAttribute('data-value', value);
Â  Â  Â  Â  Â  Â  item.setAttribute('data-bad', isBad.toString());

Â  Â  Â  Â  Â  Â  // PosiciÃ³n inicial aleatoria en X
Â  Â  Â  Â  Â  Â  const itemWidth = item.offsetWidth || 40; // Usa el width del CSS si ya estÃ¡ renderizado
Â  Â  Â  Â  Â  Â  const containerWidth = gameContainer.offsetWidth;
Â  Â  Â  Â  Â  Â  const randomX = Math.floor(Math.random() * (containerWidth - itemWidth));
Â  Â  Â  Â  Â  Â  item.style.left = `${randomX}px`;
Â  Â  Â  Â  Â  Â  item.style.top = '0px';

Â  Â  Â  Â  Â  Â  gameContainer.appendChild(item);
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- Movimiento del Jugador (Canasta) ---
Â  Â  Â  Â  gameContainer.addEventListener('mousemove', (e) => {
Â  Â  Â  Â  Â  Â  if (isPaused) return; 

Â  Â  Â  Â  Â  Â  const containerRect = gameContainer.getBoundingClientRect();
Â  Â  Â  Â  Â  Â  let mouseX = e.clientX - containerRect.left;
Â  Â  Â  Â  Â  Â  let playerX = mouseX - player.offsetWidth / 2;
Â  Â  Â  Â  Â  Â  playerX = Math.max(0, Math.min(playerX, gameContainer.offsetWidth - player.offsetWidth));

Â  Â  Â  Â  Â  Â  player.style.left = `${playerX}px`;
Â  Â  Â  Â  });

Â  Â  Â  Â  // --- Bucle Principal del Juego (CaÃ­da y ColisiÃ³n) ---
Â  Â  Â  Â  function updateGame() {
Â  Â  Â  Â  Â  Â  if (isPaused) return;

Â  Â  Â  Â  Â  Â  const items = document.querySelectorAll('.falling-item');
Â  Â  Â  Â  Â  Â  const containerHeight = gameContainer.offsetHeight;
Â  Â  Â  Â  Â  Â  const playerLeft = parseFloat(player.style.left);
Â  Â  Â  Â  Â  Â  const playerWidth = player.offsetWidth;

Â  Â  Â  Â  Â  Â  items.forEach(item => {
Â  Â  Â  Â  Â  Â  Â  Â  let currentTop = parseFloat(item.style.top) || 0;
Â  Â  Â  Â  Â  Â  Â  Â  // Velocidad aumenta con el nivel
Â  Â  Â  Â  Â  Â  Â  Â  let fallAmount = itemFallSpeed + (currentLevel * 0.25); 
Â  Â  Â  Â  Â  Â  Â  Â  item.style.top = `${currentTop + fallAmount}px`;

Â  Â  Â  Â  Â  Â  Â  Â  const itemBottomRel = currentTop + item.offsetHeight;
                const playerTopRel = containerHeight * 0.90; // La parte superior del jugador (bottom: 10%)
                const playerBottomRel = containerHeight; // El fondo del contenedor

Â  Â  Â  Â  Â  Â  Â  Â  // 1. DetecciÃ³n de ColisiÃ³n (Ha sido atrapado)
Â  Â  Â  Â  Â  Â  Â  Â  if (itemBottomRel >= playerTopRel && currentTop < playerTopRel) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ColisiÃ³n Horizontal
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const itemLeft = parseFloat(item.style.left);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const itemRight = itemLeft + item.offsetWidth;
                    
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (itemRight >= playerLeft && itemLeft <= playerLeft + playerWidth) {
                        const value = parseInt(item.getAttribute('data-value'));
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  score += value;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  score = Math.max(0, score);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  scoreDisplay.textContent = score;

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  item.remove();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  checkLevelCompletion(); 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  return;
                    }
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  // 2. Elemento ha caÃ­do al suelo
Â  Â  Â  Â  Â  Â  Â  Â  if (currentTop > containerHeight) { 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const isBad = item.getAttribute('data-bad') === 'true';

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // PenalizaciÃ³n si un billete toca el suelo
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if (!isBad) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â const value = parseInt(item.getAttribute('data-value'));
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â score -= Math.floor(value / 2);Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â score = Math.max(0, score);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â scoreDisplay.textContent = score;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  item.remove();
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- Control de Pausa/Reinicio ---
Â  Â  Â  Â  function pauseGame() {
Â  Â  Â  Â  Â  Â  isPaused = true;
Â  Â  Â  Â  Â  Â  clearInterval(gameInterval);
Â  Â  Â  Â  Â  Â  clearInterval(itemDropInterval);
Â  Â  Â  Â  Â  Â  document.querySelectorAll('.falling-item').forEach(item => item.remove());
Â  Â  Â  Â  }

Â  Â  Â  Â  function resumeGame() {
Â  Â  Â  Â  Â  Â  isPaused = false;
Â  Â  Â  Â  Â  Â  gameInterval = setInterval(updateGame, 1000 / 60);Â 

Â  Â  Â  Â  Â  Â  // Disminuye el tiempo entre Ã­tems para aumentar la dificultad
Â  Â  Â  Â  Â  Â  let dropDelay = Math.max(500, 1500 - (currentLevel * 66));Â 
Â  Â  Â  Â  Â  Â  itemDropInterval = setInterval(createItem, dropDelay);Â 
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- LÃ³gica de Niveles ---
Â  Â  Â  Â  function checkLevelCompletion() {
Â  Â  Â  Â  Â  Â  const goal = levels[currentLevel - 1];Â 
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (score >= goal) {
Â  Â  Â  Â  Â  Â  Â  Â  pauseGame(); 

Â  Â  Â  Â  Â  Â  Â  Â  if (currentLevel < levels.length) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Siguiente Nivel
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  messageText.textContent = "Â¡Nivel Superado! ðŸŽ‰";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const nextScenarioName = scenarios[currentLevel][0];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  messageDetail.innerHTML = `Has acumulado $${score}. Siguiente destino: **${nextScenarioName}**.<br>El objetivo para el Nivel ${currentLevel + 1} es $${levels[currentLevel]}.`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nextLevelButton.textContent = "Continuar al Nivel " + (currentLevel + 1);
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nextLevelButton.style.display = 'block';
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Â¡Juego Terminado!
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  messageText.textContent = "Â¡Felicidades, HAS GANADO! ðŸ†";
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  messageDetail.innerHTML = `Â¡Has completado los **${levels.length} niveles** y has viajado por todo el cosmos y la Tierra con un total de **$${score}**!`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  nextLevelButton.textContent = "Volver a Jugar (Nivel 1)";
                    // Reestablecer la funciÃ³n para reiniciar en initGame
                    nextLevelButton.onclick = () => { initGame(); }; 
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  gameMessage.style.display = 'block';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function nextLevel() {
            // Si el botÃ³n ya fue reasignado para reiniciar el juego, simplemente retornar
            if (nextLevelButton.textContent.includes("Volver a Jugar")) return;

Â  Â  Â  Â  Â  Â  if (currentLevel < levels.length) {
Â  Â  Â  Â  Â  Â  Â  Â  currentLevel++;
Â  Â  Â  Â  Â  Â  } else {
                // Esta parte ya no se alcanza si se reinicia en checkLevelCompletion
                return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  itemFallSpeed = 3 + (currentLevel * 0.25);Â 

Â  Â  Â  Â  Â  Â  // Actualiza el escenario
Â  Â  Â  Â  Â  Â  setScenarioStyle(scenarios[currentLevel - 1]);
Â  Â  Â  Â  Â  Â  levelDisplay.textContent = currentLevel;
Â  Â  Â  Â  Â  Â  goalDisplay.textContent = levels[currentLevel - 1];
Â  Â  Â  Â  Â  Â  scoreDisplay.textContent = score; 

Â  Â  Â  Â  Â  Â  gameMessage.style.display = 'none';
Â  Â  Â  Â  Â  Â  resumeGame();
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- InicializaciÃ³n del Juego ---
Â  Â  Â  Â  function initGame() {
Â  Â  Â  Â  Â  Â  currentLevel = 1;
Â  Â  Â  Â  Â  Â  score = 0;
Â  Â  Â  Â  Â  Â  itemFallSpeed = 3;

Â  Â  Â  Â  Â  Â  setScenarioStyle(scenarios[0]);
Â  Â  Â  Â  Â  Â  levelDisplay.textContent = 1;
Â  Â  Â  Â  Â  Â  goalDisplay.textContent = levels[0];
Â  Â  Â  Â  Â  Â  scoreDisplay.textContent = 0;

Â  Â  Â  Â  Â  Â  pauseGame();Â 

Â  Â  Â  Â  Â  Â  // Pantalla de bienvenida
Â  Â  Â  Â  Â  Â  messageText.textContent = "Â¡Bienvenido a Atrapa el dinero! ðŸ’°";
Â  Â  Â  Â  Â  Â  messageDetail.innerHTML = `Atrapa el dinero y esquiva las bombas (ðŸ’£). Â¡PrepÃ¡rate para viajar por 15 escenarios Ãºnicos!<br>El objetivo del Nivel 1 en **${scenarios[0][0]}** es $${levels[0]}.`;
Â  Â  Â  Â  Â  Â  nextLevelButton.textContent = "Â¡Empezar a Jugar!";
Â  Â  Â  Â  Â  Â  nextLevelButton.onclick = () => {
Â  Â  Â  Â  Â  Â  Â  Â  Â gameMessage.style.display = 'none';
Â  Â  Â  Â  Â  Â  Â  Â  Â resumeGame();
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  Â  Â  gameMessage.style.display = 'block';
Â  Â  Â  Â  }

Â  Â  Â  Â  initGame();

Â  Â  </script>
</body>
</html>
